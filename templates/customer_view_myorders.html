{% include 'customer_header.html' %}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-12">
            {% if data['return'] %}
            <!-- Return Request Form -->
            <div class="card shadow-lg p-4 mb-5 bg-white rounded">
                <h2 class="text-center mb-4">Submit Return Request</h2>
                <form action="" method="post">
                    <div class="form-group mb-3">
                        <label for="bbid" class="form-label">Vehicle Name</label>
                        <input type="text" name="bbid" value="{{ data['return'][0]['vehicle_name'] }}" readonly class="form-control" id="bbid">
                    </div>
                    <div class="form-group mb-4">
                        <label for="reason" class="form-label">Reason for Return</label>
                        <input type="text" name="reason" class="form-control" id="reason" placeholder="Enter your reason" required>
                    </div>
                    <div class="text-center">
                        <button type="submit" name="send" class="btn btn-primary btn-lg">Send Request</button>
                    </div>
                </form>
            </div>
            {% else %}
            <!-- Purchase History -->
            <h3 class="text-center mb-4">Purchase History</h3>
            <div class="table-container">
                <table class="table table-hover table-bordered shadow-sm">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Image</th>
                            <th scope="col">Vehicle Name</th>
                            <th scope="col">Total Amount</th>
                            <th scope="col">Purchased Date</th>
                            <th scope="col">Status</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in data['myorders'] %}
                        <tr>
                            <td>
                                <div class="image-container">
                                    <img src="/{{ i['vehicle_image'] }}" alt="{{ i['vehicle_name'] }}" class="img-fluid">
                                </div>
                            </td>
                            <td>{{ i['vehicle_name'] }}</td>
                            <td>₹{{ i['total_amount'] }}</td>
                            <td>{{ i['date'] }}</td>
                            <td>
                                <span class="badge {{ 'bg-success' if i['booked_status'] == 'paid' else 'bg-warning' }}">
                                    {{ i['booked_status'] | capitalize }}
                                </span>
                            </td>
                            <td>
                                <a href="?action=return&id={{ i['booking_id'] }}" class="btn btn-info btn-sm">Send Return Request</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Spacer to ensure footer isn’t too close -->
<div class="footer-space" style="height: 100px;"></div>

{% include 'footer.html' %}

<!-- Bootstrap JS (assuming header uses it) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
    /* General Styling */
    body {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
    }

    .container {
        padding-top: 50px;
        padding-bottom: 50px;
        max-width: 100%;
    }

    h2, h3 {
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
        color: #2c3e50;
    }

    /* Card Styling for Form */
    .card {
        border: none;
        border-radius: 15px;
        background: #fff;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
    }

    .form-control {
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        transition: border-color 0.3s ease;
    }

    .form-control:focus {
        border-color: #0984e3;
        box-shadow: 0 0 5px rgba(9, 132, 227, 0.5);
    }

    .btn-primary {
        background: #0984e3;
        border: none;
        padding: 12px 25px;
        font-weight: 600;
        text-transform: uppercase;
        border-radius: 8px;
        transition: background 0.3s ease, transform 0.2s ease;
    }

    .btn-primary:hover {
        background: #0652dd;
        transform: translateY(-2px);
    }

    /* Table Styling */
    .table-container {
        width: 100%;
        overflow-x: hidden;
    }

    .table {
        background: #fff;
        border-radius: 10px;
        width: 100%;
        table-layout: fixed;
    }

    .thead-dark {
        background: #2c3e50;
        color: #fff;
    }

    .thead-dark th {
        font-weight: 600;
        text-transform: uppercase;
        padding: 15px;
        white-space: nowrap;
        text-align: center; /* Center header text */
    }

    .table td {
        vertical-align: middle;
        padding: 10px;
        word-wrap: break-word;
        text-align: center; /* Center cell content horizontally */
    }

    /* Column Widths */
    .table th:nth-child(1), .table td:nth-child(1) { width: 15%; } /* Image */
    .table th:nth-child(2), .table td:nth-child(2) { width: 25%; } /* Vehicle Name */
    .table th:nth-child(3), .table td:nth-child(3) { width: 15%; } /* Total Amount */
    .table th:nth-child(4), .table td:nth-child(4) { width: 20%; } /* Purchased Date */
    .table th:nth-child(5), .table td:nth-child(5) { width: 10%; } /* Status */
    .table th:nth-child(6), .table td:nth-child(6) { width: 15%; } /* Action */

    .badge {
        padding: 8px 12px;
        font-size: 14px;
        border-radius: 20px;
        white-space: nowrap;
        display: inline-block; /* Ensure badge stays centered */
    }

    .btn-info {
        padding: 6px 12px;
        font-weight: 500;
        border-radius: 5px;
        transition: background 0.3s ease;
        white-space: nowrap;
        display: inline-block; /* Ensure button stays centered */
    }

    .btn-info:hover {
        background: #117a8b;
    }

    /* Image Container */
    .image-container {
        width: 120px;
        height: 140px;
        overflow: hidden;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        margin: 0 auto;
        display: flex; /* Already centered from previous adjustment */
        justify-content: center;
        align-items: center;
    }

    .image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .image-container img:hover {
        transform: scale(1.05);
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
        .image-container {
            width: 80px;
            height: 100px;
        }

        .table td, .thead-dark th {
            padding: 8px;
            font-size: 12px;
        }

        .btn-info {
            padding: 4px 8px;
            font-size: 11px;
        }

        .badge {
            padding: 6px 10px;
            font-size: 12px;
        }

        /* Adjust column widths for smaller screens */
        .table th:nth-child(1), .table td:nth-child(1) { width: 20%; }
        .table th:nth-child(2), .table td:nth-child(2) { width: 30%; }
        .table th:nth-child(3), .table td:nth-child(3) { width: 15%; }
        .table th:nth-child(4), .table td:nth-child(4) { width: 20%; }
        .table th:nth-child(5), .table td:nth-child(5) { width: 15%; }
        .table th:nth-child(6), .table td:nth-child(6) { width: 20%; }
    }
</style>